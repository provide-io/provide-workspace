# Lychee link checker configuration for provide-foundry
# Documentation: https://lychee.cli.rs/#/usage/config

# Maximum number of concurrent network requests
max_concurrency = 128

# Maximum number of retries per link
max_retries = 3

# Timeout per request in seconds
timeout = 30

# User agent string
user_agent = "Mozilla/5.0 (compatible; lychee/provide-foundry-docs)"

# Accept these HTTP status codes as valid
accept = [200, 204, 301, 302, 307, 308, 429]

# Verbosity level (quiet, info, debug, trace)
# verbose = "info"

# Email checking is disabled by default (use --include-mail to enable)

# Exclude specific URLs and patterns
exclude = [
    # Localhost and development URLs (wildcard for all ports)
    "http://localhost*",
    "http://127.0.0.1*",
    "https://127.0.0.1*",

    # Private/internal URLs
    "http://0.0.0.0*",

    # Temporary or variable URLs
    "file:///*",

    # MkDocs extensionless links (work after build with use_directory_urls: true)
    # These are NOT broken - they're valid MkDocs patterns
    ".*/docs/[^/]+/?$",              # Extensionless directory links like docs/guides
    ".*/docs/packages/.*",            # Monorepo namespace dirs created at build time
    ".*\\.md#.*",                     # Anchor links in markdown files

    # Example/placeholder URLs
    "https?://example\\.(com|org|net).*",

    # Known false positives or rate-limited sites
    "https://github.com/.*/issues/new",
    "https://github.com/.*/pulls",

    # Google Analytics (these require specific cookies/auth)
    "https://analytics.google.com/*",
    "https://www.googletagmanager.com/*",

    # Social media profile URLs that may require auth
    "https://twitter.com/*",
    "https://www.linkedin.com/in/*",
]

# Exclude specific file patterns
exclude_path = [
    # Exclude build artifacts
    "site/",
    "build/",
    "dist/",
    ".venv/",
    "workenv/",
    ".git/",
    "node_modules/",

    # Exclude cache and temp directories
    ".pytest_cache/",
    ".mypy_cache/",
    ".ruff_cache/",
    "__pycache__/",

    # Exclude specific files that may have template variables
    ".provide/",
]

# File types to check are specified via CLI args

# Remap URLs (useful for redirects or moved content)
# [remap]
# Example: "https://example.com/old" = "https://example.com/new"

# Custom headers for specific domains
# [[headers]]
# pattern = "https://github.com/*"
# "Authorization" = "Bearer ${GITHUB_TOKEN}"
